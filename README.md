<div align="center">

# ğŸ Macè½¯ä»¶ç‰ˆæœ¬è‡ªåŠ¨è¿½è¸ªå™¨

<p align="center">
  <strong>ä¼ä¸šçº§Macè½¯ä»¶ç‰ˆæœ¬è‡ªåŠ¨æ£€æµ‹ä¸æ›´æ–°ç³»ç»Ÿ</strong>
</p>

<p align="center">
  <a href="#å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹</a> â€¢
  <a href="#åŠŸèƒ½ç‰¹æ€§">åŠŸèƒ½ç‰¹æ€§</a> â€¢
  <a href="#APIæ–‡æ¡£">APIæ–‡æ¡£</a> â€¢
  <a href="#éƒ¨ç½²æŒ‡å—">éƒ¨ç½²æŒ‡å—</a> â€¢
  <a href="#è´¡çŒ®æŒ‡å—">è´¡çŒ®æŒ‡å—</a>
</p>

<p align="center">
  <img src="https://img.shields.io/badge/Python-3.8+-blue.svg" alt="Python Version">
  <img src="https://img.shields.io/badge/License-MIT-green.svg" alt="License">
  <img src="https://img.shields.io/badge/Platform-macOS-lightgrey.svg" alt="Platform">
  <img src="https://img.shields.io/github/stars/rickepicepic/MacSoftwareVersionTracker.svg" alt="Stars">
  <img src="https://img.shields.io/github/forks/rickepicepic/MacSoftwareVersionTracker.svg" alt="Forks">
</p>

</div>

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªä¸“é—¨ä¸ºMacç³»ç»Ÿè®¾è®¡çš„**ä¼ä¸šçº§è½¯ä»¶ç‰ˆæœ¬è‡ªåŠ¨æ£€æµ‹å·¥å…·**ï¼Œèƒ½å¤Ÿæ ¹æ®è¾“å…¥çš„è½¯ä»¶åˆ—è¡¨ï¼Œæ™ºèƒ½çˆ¬å–å„å¤§å®˜ç½‘çš„æœ€æ–°ç‰ˆæœ¬ä¿¡æ¯å’Œä¸‹è½½åœ°å€ã€‚è¯¥ç³»ç»Ÿé‡‡ç”¨å¤šç­–ç•¥çˆ¬å–æ–¹å¼ï¼Œå…·æœ‰é«˜å¯é æ€§å’ŒæŒç»­æ€§ï¼Œå¯ä¸ä¼ä¸šåŠå…¬è½¯ä»¶å­˜å‚¨ç³»ç»Ÿæ— ç¼é›†æˆã€‚

### ğŸ¯ è§£å†³çš„é—®é¢˜

- âœ… **è‡ªåŠ¨åŒ–ç‰ˆæœ¬æ£€æµ‹**: æ— éœ€æ‰‹åŠ¨æ£€æŸ¥è½¯ä»¶æ›´æ–°
- âœ… **ä¼ä¸šè½¯ä»¶ç®¡ç†**: ç»Ÿä¸€ç®¡ç†ä¼ä¸šå†…éƒ¨è½¯ä»¶ç‰ˆæœ¬
- âœ… **å¤šæºæ•°æ®è·å–**: æ”¯æŒå®˜ç½‘ã€GitHubã€APIç­‰å¤šç§æ•°æ®æº
- âœ… **é«˜å¯é æ€§ä¿éšœ**: å¤šé‡å¤‡ä»½ç­–ç•¥ï¼Œç¡®ä¿æ£€æµ‹æˆåŠŸç‡
- âœ… **ç³»ç»Ÿé›†æˆå‹å¥½**: æä¾›å®Œæ•´APIæ¥å£ï¼Œä¾¿äºé›†æˆ

### ğŸš€ æ ¸å¿ƒä¼˜åŠ¿

| ç‰¹æ€§ | ä¼ ç»Ÿæ–¹å¼ | æœ¬ç³»ç»Ÿ |
|------|----------|--------|
| æ£€æµ‹æ–¹å¼ | æ‰‹åŠ¨æ£€æŸ¥ | å…¨è‡ªåŠ¨æ£€æµ‹ |
| æ•°æ®æº | å•ä¸€å®˜ç½‘ | å¤šæºæ™ºèƒ½åˆ‡æ¢ |
| å¯é æ€§ | ä¾èµ–äººå·¥ | å¤šé‡å¤‡ä»½ç­–ç•¥ |
| æ‰©å±•æ€§ | éš¾ä»¥æ‰©å±• | æ’ä»¶åŒ–æ¶æ„ |
| é›†æˆèƒ½åŠ› | æ—  | å®Œæ•´APIæ¥å£ |

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ æ™ºèƒ½æ£€æµ‹å¼•æ“
- **ğŸ” è‡ªåŠ¨è¯†åˆ«**: æ ¹æ®è½¯ä»¶åç§°å’Œå®˜ç½‘URLè‡ªåŠ¨é€‰æ‹©æœ€ä½³çˆ¬å–ç­–ç•¥
- **ğŸŒ å¤šæ¨¡å¼æ”¯æŒ**: æ”¯æŒé™æ€é¡µé¢ã€åŠ¨æ€åŠ è½½ã€APIæ¥å£ç­‰å¤šç§æ£€æµ‹æ–¹å¼
- **ğŸ“ ç‰ˆæœ¬å·æ™ºèƒ½è§£æ**: æ”¯æŒå„ç§ç‰ˆæœ¬å·æ ¼å¼ï¼ˆ1.2.3ã€2024.1.0ã€v1.0ç­‰ï¼‰
- **ğŸ¨ UIè‡ªé€‚åº”**: è‡ªåŠ¨é€‚åº”ä¸åŒç½‘ç«™çš„é¡µé¢ç»“æ„å˜åŒ–

### ğŸ”„ é«˜å¯é æ€§ä¿éšœ
- **ğŸ›¡ï¸ å¤šé‡å¤‡ä»½ç­–ç•¥**: ä¸»ç­–ç•¥å¤±è´¥æ—¶è‡ªåŠ¨åˆ‡æ¢å¤‡ç”¨æ–¹æ¡ˆ
- **ğŸ”„ æ™ºèƒ½é‡è¯•æœºåˆ¶**: ç½‘ç»œå¼‚å¸¸æ—¶è‡ªåŠ¨é‡è¯•ï¼Œæ”¯æŒæŒ‡æ•°é€€é¿
- **ğŸš« é”™è¯¯éš”ç¦»**: å•ä¸ªè½¯ä»¶æ£€æµ‹å¤±è´¥ä¸å½±å“å…¶ä»–è½¯ä»¶
- **ğŸ“Š æˆåŠŸç‡ç›‘æ§**: å®æ—¶ç›‘æ§æ£€æµ‹æˆåŠŸç‡ï¼Œè‡ªåŠ¨ä¼˜åŒ–ç­–ç•¥

### ğŸš€ ä¼ä¸šçº§ç‰¹æ€§
- **âš¡ æ‰¹é‡å¤„ç†**: æ”¯æŒå¤§è§„æ¨¡è½¯ä»¶åˆ—è¡¨çš„å¹¶å‘æ£€æµ‹
- **ğŸ”Œ APIæ¥å£**: æä¾›RESTful APIï¼Œä¾¿äºç³»ç»Ÿé›†æˆ
- **ğŸ’¾ æ™ºèƒ½ç¼“å­˜**: å¤šçº§ç¼“å­˜æœºåˆ¶ï¼Œå‡å°‘é‡å¤è¯·æ±‚
- **ğŸ“¢ ç›‘æ§å‘Šè­¦**: æ”¯æŒç‰ˆæœ¬æ›´æ–°é€šçŸ¥å’Œå¼‚å¸¸å‘Šè­¦
- **ğŸ“ˆ æ•°æ®åˆ†æ**: æä¾›è¯¦ç»†çš„æ£€æµ‹ç»Ÿè®¡å’Œè¶‹åŠ¿åˆ†æ

### ğŸ”§ å¼€å‘è€…å‹å¥½
- **ğŸ§© æ’ä»¶åŒ–æ¶æ„**: æ˜“äºæ‰©å±•æ–°çš„æ£€æµ‹ç­–ç•¥
- **ğŸ“š å®Œæ•´æ–‡æ¡£**: è¯¦ç»†çš„APIæ–‡æ¡£å’Œä½¿ç”¨ç¤ºä¾‹
- **ğŸ§ª æµ‹è¯•è¦†ç›–**: å®Œæ•´çš„å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- **ğŸ³ å®¹å™¨åŒ–éƒ¨ç½²**: æ”¯æŒDockerå’ŒKuberneteséƒ¨ç½²

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

<details>
<summary>ğŸ“ é¡¹ç›®ç»“æ„</summary>

```
MacSoftwareVersionTracker/
â”œâ”€â”€ ğŸ“¦ core/                    # æ ¸å¿ƒå¼•æ“
â”‚   â”œâ”€â”€ ğŸ” detector.py         # ç‰ˆæœ¬æ£€æµ‹å™¨
â”‚   â”œâ”€â”€ ğŸ¯ strategies/         # æ£€æµ‹ç­–ç•¥
â”‚   â”‚   â”œâ”€â”€ github_strategy.py
â”‚   â”‚   â”œâ”€â”€ chrome_strategy.py
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ ğŸ“ parsers/           # ç‰ˆæœ¬è§£æå™¨
â”œâ”€â”€ ğŸ”Œ adapters/              # é€‚é…å™¨å±‚
â”‚   â”œâ”€â”€ ğŸ•·ï¸ web_scraper.py     # ç½‘é¡µçˆ¬è™«é€‚é…å™¨
â”‚   â”œâ”€â”€ ğŸŒ api_client.py      # APIå®¢æˆ·ç«¯é€‚é…å™¨
â”‚   â””â”€â”€ ğŸ¤– selenium_driver.py # æµè§ˆå™¨é©±åŠ¨é€‚é…å™¨
â”œâ”€â”€ âš™ï¸ services/              # ä¸šåŠ¡æœåŠ¡
â”‚   â”œâ”€â”€ ğŸ” version_service.py # ç‰ˆæœ¬æ£€æµ‹æœåŠ¡
â”‚   â”œâ”€â”€ ğŸ’¾ cache_service.py   # ç¼“å­˜æœåŠ¡
â”‚   â”œâ”€â”€ ğŸ“¢ notification_service.py # é€šçŸ¥æœåŠ¡
â”‚   â””â”€â”€ ğŸ“Š monitoring_service.py # ç›‘æ§æœåŠ¡
â”œâ”€â”€ ğŸ”— api/                   # APIæ¥å£
â”‚   â”œâ”€â”€ ğŸŒ rest_api.py        # REST API
â”‚   â””â”€â”€ ğŸª webhooks.py        # Webhookæ”¯æŒ
â”œâ”€â”€ âš™ï¸ config/                # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ ğŸ”§ settings.py        # ç³»ç»Ÿé…ç½®
â”‚   â””â”€â”€ ğŸ“‹ strategies.yaml    # ç­–ç•¥é…ç½®
â””â”€â”€ ğŸ› ï¸ utils/                 # å·¥å…·æ¨¡å—
    â”œâ”€â”€ ğŸ“ logger.py          # æ—¥å¿—ç®¡ç†
    â”œâ”€â”€ âœ… validators.py      # æ•°æ®éªŒè¯
    â””â”€â”€ ğŸ”§ helpers.py         # è¾…åŠ©å‡½æ•°
```

</details>

### ğŸ¨ æ¶æ„è®¾è®¡åŸåˆ™

- **ğŸ§© æ¨¡å—åŒ–è®¾è®¡**: æ¯ä¸ªç»„ä»¶èŒè´£å•ä¸€ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•
- **ğŸ”Œ æ’ä»¶åŒ–æ¶æ„**: æ”¯æŒåŠ¨æ€åŠ è½½æ£€æµ‹ç­–ç•¥å’Œé€‚é…å™¨
- **ğŸ›¡ï¸ åˆ†å±‚æ¶æ„**: æ¸…æ™°çš„åˆ†å±‚è®¾è®¡ï¼Œé™ä½è€¦åˆåº¦
- **ğŸ“ˆ å¯æ‰©å±•æ€§**: æ”¯æŒæ°´å¹³æ‰©å±•å’Œå‚ç›´æ‰©å±•

## ğŸ“± æ”¯æŒçš„è½¯ä»¶ç±»å‹

<div align="center">

| ğŸ› ï¸ å¼€å‘å·¥å…· | ğŸ“„ åŠå…¬è½¯ä»¶ | ğŸ¨ è®¾è®¡å·¥å…· | ğŸ’¬ é€šè®¯å·¥å…· |
|-------------|-------------|-------------|-------------|
| VS Code | Microsoft Office | Adobe Creative Suite | å¾®ä¿¡ |
| IntelliJ IDEA | LibreOffice | Sketch | QQ |
| PyCharm | WPS Office | Figma | Telegram |
| Xcode | Adobe Acrobat | Blender | Discord |
| Sublime Text | PDF Expert | Cinema 4D | Zoom |
| GitHub Desktop | Notion | Maya | Teams |

| ğŸŒ æµè§ˆå™¨ | ğŸ”§ ç³»ç»Ÿå·¥å…· | ğŸ“Š æ•°æ®åˆ†æ | ğŸ® å¨±ä¹è½¯ä»¶ |
|-----------|-------------|-------------|-------------|
| Chrome | The Unarchiver | Tableau | Steam |
| Firefox | CleanMyMac | Power BI | Epic Games |
| Safari | Keka | R Studio | Discord |
| Edge | DiskSight | Jupyter | Spotify |
| Opera | Activity Monitor | Anaconda | VLC |
| Brave | iStat Menus | SPSS | IINA |

</div>

### ğŸ¯ æ£€æµ‹ç­–ç•¥è¦†ç›–

- **ğŸ™ GitHubé¡¹ç›®**: è‡ªåŠ¨æ£€æµ‹å¼€æºè½¯ä»¶çš„æœ€æ–°Release
- **ğŸ¢ å®˜æ–¹ç½‘ç«™**: æ™ºèƒ½è§£æå®˜ç½‘çš„ç‰ˆæœ¬ä¿¡æ¯
- **ğŸ“¦ è½¯ä»¶ä»“åº“**: æ”¯æŒHomebrewã€MacPortsç­‰åŒ…ç®¡ç†å™¨
- **ğŸ”— APIæ¥å£**: ç›´æ¥è°ƒç”¨å®˜æ–¹APIè·å–ç‰ˆæœ¬ä¿¡æ¯
- **ğŸ¤– åŠ¨æ€é¡µé¢**: ä½¿ç”¨Seleniumå¤„ç†JavaScriptæ¸²æŸ“çš„é¡µé¢

> ğŸ’¡ **æç¤º**: ç³»ç»Ÿæ”¯æŒ300+å¸¸ç”¨Macè½¯ä»¶ï¼Œå¹¶ä¸”å¯ä»¥è½»æ¾æ‰©å±•æ”¯æŒæ–°è½¯ä»¶

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸ“‹ ç³»ç»Ÿè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: macOS 10.14+ 
- **Pythonç‰ˆæœ¬**: 3.8+
- **å†…å­˜**: æœ€å°‘2GB RAM
- **ç½‘ç»œ**: ç¨³å®šçš„äº’è”ç½‘è¿æ¥

### 1ï¸âƒ£ å®‰è£…éƒ¨ç½²

<details>
<summary>ğŸ”§ æ–¹å¼ä¸€ï¼šæºç å®‰è£…ï¼ˆæ¨èå¼€å‘è€…ï¼‰</summary>

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/rickepicepic/MacSoftwareVersionTracker.git
cd MacSoftwareVersionTracker

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# é…ç½®ç¯å¢ƒ
cp config/settings.example.py config/settings.py
```

</details>

<details>
<summary>ğŸ³ æ–¹å¼äºŒï¼šDockeréƒ¨ç½²ï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰</summary>

```bash
# æ‹‰å–é•œåƒ
docker pull rickepicepic/mac-software-tracker:latest

# è¿è¡Œå®¹å™¨
docker run -d \
  --name mac-tracker \
  -p 8080:8080 \
  -v $(pwd)/data:/app/data \
  rickepicepic/mac-software-tracker:latest
```

</details>

<details>
<summary>ğŸ“¦ æ–¹å¼ä¸‰ï¼šHomebrewå®‰è£…ï¼ˆå³å°†æ”¯æŒï¼‰</summary>

```bash
# æ·»åŠ tap
brew tap rickepicepic/mac-software-tracker

# å®‰è£…
brew install mac-software-tracker

# å¯åŠ¨æœåŠ¡
brew services start mac-software-tracker
```

</details>

### 2ï¸âƒ£ åŸºç¡€ä½¿ç”¨

<details>
<summary>ğŸ” å•ä¸ªè½¯ä»¶æ£€æµ‹</summary>

```python
from core.detector import SoftwareVersionDetector

# åˆ›å»ºæ£€æµ‹å™¨
detector = SoftwareVersionDetector()

# æ£€æµ‹å•ä¸ªè½¯ä»¶
result = detector.detect_version(
    name="VS Code",
    url="https://code.visualstudio.com"
)

print(f"ğŸ“¦ è½¯ä»¶åç§°: {result.name}")
print(f"ğŸ”¢ æœ€æ–°ç‰ˆæœ¬: {result.version}")
print(f"ğŸ“¥ ä¸‹è½½åœ°å€: {result.download_url}")
print(f"ğŸ“… å‘å¸ƒæ—¶é—´: {result.release_date}")
```

</details>

<details>
<summary>ğŸ“Š æ‰¹é‡æ£€æµ‹</summary>

```python
# å‡†å¤‡è½¯ä»¶åˆ—è¡¨
software_list = [
    {"name": "Chrome", "url": "https://www.google.com/chrome/"},
    {"name": "Firefox", "url": "https://www.mozilla.org/firefox/"},
    {"name": "VS Code", "url": "https://code.visualstudio.com"}
]

# æ‰¹é‡æ£€æµ‹
results = detector.batch_detect(software_list)

# è¾“å‡ºç»“æœ
for result in results:
    status = "âœ…" if result.success else "âŒ"
    print(f"{status} {result.name}: {result.version}")
```

</details>

<details>
<summary>ğŸ“‹ Excelæ–‡ä»¶å¤„ç†</summary>

```python
# ä»Excelæ–‡ä»¶è¯»å–è½¯ä»¶åˆ—è¡¨
results = detector.detect_from_excel("software_list.xlsx")

# ä¿å­˜ç»“æœåˆ°Excel
detector.save_to_excel(results, "detection_results.xlsx")
```

</details>

### 3ï¸âƒ£ å‘½ä»¤è¡Œä½¿ç”¨

```bash
# æ£€æµ‹å•ä¸ªè½¯ä»¶
python main.py detect-single --name "Chrome" --url "https://www.google.com/chrome/"

# æ‰¹é‡æ£€æµ‹
python main.py detect-batch --input software_list.xlsx --output results.xlsx

# å¯åŠ¨APIæœåŠ¡
python main.py start-api --port 8080

# æŸ¥çœ‹æ”¯æŒçš„è½¯ä»¶åˆ—è¡¨
python main.py list-supported
```

## ğŸ”— APIæ–‡æ¡£

### ğŸ“¡ REST API

<details>
<summary>ğŸ” å•ä¸ªè½¯ä»¶æ£€æµ‹</summary>

```http
POST /api/v1/detect
Content-Type: application/json

{
    "name": "Chrome",
    "url": "https://www.google.com/chrome/",
    "strategy": "auto"  // å¯é€‰ï¼šæŒ‡å®šæ£€æµ‹ç­–ç•¥
}
```

**å“åº”ç¤ºä¾‹:**
```json
{
    "success": true,
    "data": {
        "name": "Chrome",
        "version": "120.0.6099.109",
        "download_url": "https://dl.google.com/chrome/mac/stable/GGRO/googlechrome.dmg",
        "release_date": "2023-12-12",
        "file_size": "185.2 MB",
        "strategy_used": "chrome_official"
    },
    "timestamp": "2023-12-12T10:30:00Z"
}
```

</details>

<details>
<summary>ğŸ“Š æ‰¹é‡æ£€æµ‹</summary>

```http
POST /api/v1/batch-detect
Content-Type: application/json

{
    "software_list": [
        {"name": "Chrome", "url": "https://www.google.com/chrome/"},
        {"name": "Firefox", "url": "https://www.mozilla.org/firefox/"},
        {"name": "VS Code", "url": "https://code.visualstudio.com"}
    ],
    "options": {
        "concurrent_limit": 5,
        "timeout": 30,
        "use_cache": true
    }
}
```

</details>

<details>
<summary>ğŸ“‹ å…¶ä»–APIç«¯ç‚¹</summary>

```http
# è·å–æ”¯æŒçš„è½¯ä»¶åˆ—è¡¨
GET /api/v1/supported-software

# è·å–æ£€æµ‹å†å²
GET /api/v1/history?software=Chrome&limit=10&days=30

# ç³»ç»Ÿå¥åº·æ£€æŸ¥
GET /api/v1/health

# è·å–ç»Ÿè®¡ä¿¡æ¯
GET /api/v1/stats

# æ¸…é™¤ç¼“å­˜
DELETE /api/v1/cache?software=Chrome
```

</details>

### ğŸª Webhookæ”¯æŒ

<details>
<summary>âš™ï¸ é…ç½®Webhook</summary>

```python
# é…ç½®Webhook
webhook_config = {
    "url": "https://your-system.com/webhook",
    "events": ["version_updated", "detection_failed", "batch_completed"],
    "secret": "your-secret-key",
    "retry_count": 3,
    "timeout": 10
}

detector.configure_webhook(webhook_config)
```

**Webhookäº‹ä»¶æ ¼å¼:**
```json
{
    "event": "version_updated",
    "timestamp": "2023-12-12T10:30:00Z",
    "data": {
        "software": "Chrome",
        "old_version": "119.0.6045.199",
        "new_version": "120.0.6099.109",
        "download_url": "https://dl.google.com/chrome/mac/stable/GGRO/googlechrome.dmg"
    },
    "signature": "sha256=..."
}
```

</details>

### ğŸ“š SDKæ”¯æŒ

<details>
<summary>ğŸ Python SDK</summary>

```python
from mac_tracker_sdk import MacTrackerClient

# åˆå§‹åŒ–å®¢æˆ·ç«¯
client = MacTrackerClient(
    base_url="http://localhost:8080",
    api_key="your-api-key"
)

# æ£€æµ‹è½¯ä»¶ç‰ˆæœ¬
result = client.detect_version("Chrome", "https://www.google.com/chrome/")
print(f"ç‰ˆæœ¬: {result.version}")
```

</details>

## ğŸ¢ ä¼ä¸šé›†æˆ

### ğŸ”— è½¯ä»¶ä»“åº“é›†æˆ

<details>
<summary>ğŸ“¦ Nexus Repositoryé›†æˆ</summary>

```python
from services.repository_service import SoftwareRepository

# è¿æ¥Nexusä»“åº“
repo = SoftwareRepository(
    type="nexus",
    url="https://nexus.company.com",
    credentials={
        "username": "admin",
        "password": "secret"
    }
)

# è‡ªåŠ¨ä¸Šä¼ æ£€æµ‹åˆ°çš„è½¯ä»¶åŒ…
detector.set_repository(repo)
detector.enable_auto_upload()
```

</details>

<details>
<summary>ğŸ—ï¸ JFrog Artifactoryé›†æˆ</summary>

```python
# è¿æ¥Artifactory
repo = SoftwareRepository(
    type="artifactory",
    url="https://artifactory.company.com",
    credentials={
        "username": "admin",
        "api_key": "your-api-key"
    }
)
```

</details>

### ğŸ“Š ç›‘æ§ç³»ç»Ÿé›†æˆ

<details>
<summary>ğŸ“ˆ Prometheus + Grafana</summary>

```python
from services.monitoring_service import MonitoringService

# é…ç½®Prometheusç›‘æ§
monitoring = MonitoringService(
    type="prometheus",
    endpoint="http://prometheus:9090",
    metrics_port=9091
)

detector.set_monitoring(monitoring)
```

**æ”¯æŒçš„ç›‘æ§æŒ‡æ ‡:**
- `software_detection_total`: æ£€æµ‹æ€»æ•°
- `software_detection_success_rate`: æˆåŠŸç‡
- `software_detection_duration_seconds`: æ£€æµ‹è€—æ—¶
- `software_version_updates_total`: ç‰ˆæœ¬æ›´æ–°æ¬¡æ•°

</details>

### ğŸ“¢ é€šçŸ¥ç³»ç»Ÿé›†æˆ

<details>
<summary>ğŸ’¬ å¤šæ¸ é“é€šçŸ¥æ”¯æŒ</summary>

```python
from services.notification_service import NotificationService

# é…ç½®å¤šç§é€šçŸ¥æ¸ é“
notification = NotificationService()

# Slacké€šçŸ¥
notification.add_channel("slack", {
    "webhook_url": "https://hooks.slack.com/services/...",
    "channel": "#software-updates",
    "username": "Mac Tracker Bot"
})

# é‚®ä»¶é€šçŸ¥
notification.add_channel("email", {
    "smtp_server": "smtp.company.com",
    "smtp_port": 587,
    "username": "noreply@company.com",
    "password": "password",
    "recipients": ["admin@company.com"]
})

# é’‰é’‰é€šçŸ¥
notification.add_channel("dingtalk", {
    "webhook_url": "https://oapi.dingtalk.com/robot/send?access_token=...",
    "secret": "your-secret"
})

# ä¼ä¸šå¾®ä¿¡é€šçŸ¥
notification.add_channel("wechat_work", {
    "webhook_url": "https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=...",
    "mentioned_list": ["@all"]
})

detector.set_notification(notification)
```

</details>

### ğŸ” ä¼ä¸šå®‰å…¨é›†æˆ

<details>
<summary>ğŸ›¡ï¸ LDAP/ADé›†æˆ</summary>

```python
from services.auth_service import AuthService

# é…ç½®LDAPè®¤è¯
auth = AuthService(
    type="ldap",
    server="ldap://ldap.company.com",
    base_dn="dc=company,dc=com",
    bind_dn="cn=admin,dc=company,dc=com",
    bind_password="password"
)

detector.set_auth_service(auth)
```

</details>

### ğŸ“‹ å·¥ä½œæµé›†æˆ

<details>
<summary>ğŸ”„ Jenkinsé›†æˆ</summary>

```groovy
pipeline {
    agent any
    
    stages {
        stage('Software Version Check') {
            steps {
                script {
                    def result = sh(
                        script: 'python main.py detect-batch --input software_list.xlsx --format json',
                        returnStdout: true
                    ).trim()
                    
                    def updates = readJSON text: result
                    if (updates.hasUpdates) {
                        // è§¦å‘è½¯ä»¶æ›´æ–°æµç¨‹
                        build job: 'software-update-pipeline', parameters: [
                            string(name: 'UPDATES', value: result)
                        ]
                    }
                }
            }
        }
    }
}
```

</details>

## âš™ï¸ é…ç½®è¯´æ˜

### ğŸ¯ æ£€æµ‹ç­–ç•¥é…ç½®

<details>
<summary>ğŸ“‹ strategies.yamlé…ç½®ç¤ºä¾‹</summary>

```yaml
# config/strategies.yaml
strategies:
  github_releases:
    name: "GitHub Releases"
    pattern: "github.com"
    method: "api"
    priority: 1
    config:
      api_endpoint: "https://api.github.com/repos/{owner}/{repo}/releases/latest"
      headers:
        Accept: "application/vnd.github.v3+json"
      rate_limit: 60  # æ¯å°æ—¶è¯·æ±‚é™åˆ¶
    
  chrome_official:
    name: "Chromeå®˜æ–¹"
    pattern: "google.com/chrome"
    method: "scraping"
    priority: 2
    config:
      version_selector: ".version-number"
      download_selector: "a[href*='.dmg']"
      user_agent: "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7)"
    
  microsoft_products:
    name: "Microsoftäº§å“"
    pattern: "microsoft.com"
    method: "hybrid"
    priority: 3
    config:
      fallback_strategies: ["scraping", "selenium"]
      timeout: 45
      
  selenium_fallback:
    name: "Seleniumé€šç”¨"
    pattern: ".*"
    method: "selenium"
    priority: 10
    config:
      headless: true
      wait_timeout: 30
      page_load_timeout: 60
```

</details>

### ğŸ”§ ç³»ç»Ÿé…ç½®

<details>
<summary>âš™ï¸ settings.pyé…ç½®ç¤ºä¾‹</summary>

```python
# config/settings.py

# æ£€æµ‹é…ç½®
DETECTION_CONFIG = {
    'timeout': 30,                    # è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
    'max_retries': 3,                # æœ€å¤§é‡è¯•æ¬¡æ•°
    'retry_delay': 2,                # é‡è¯•å»¶è¿Ÿï¼ˆç§’ï¼‰
    'concurrent_limit': 10,          # å¹¶å‘æ£€æµ‹æ•°é‡
    'cache_ttl': 3600,              # ç¼“å­˜æœ‰æ•ˆæœŸï¼ˆç§’ï¼‰
    'enable_cache': True,           # æ˜¯å¦å¯ç”¨ç¼“å­˜
    'cache_backend': 'redis',       # ç¼“å­˜åç«¯ï¼šredis/memory
}

# æµè§ˆå™¨é…ç½®
BROWSER_CONFIG = {
    'headless': True,               # æ— å¤´æ¨¡å¼
    'user_agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36',
    'viewport': {'width': 1920, 'height': 1080},
    'disable_images': True,         # ç¦ç”¨å›¾ç‰‡åŠ è½½
    'disable_javascript': False,    # æ˜¯å¦ç¦ç”¨JavaScript
    'page_load_timeout': 60,       # é¡µé¢åŠ è½½è¶…æ—¶
}

# é€šçŸ¥é…ç½®
NOTIFICATION_CONFIG = {
    'enabled': True,
    'channels': ['slack', 'email'],
    'events': ['version_updated', 'detection_failed', 'batch_completed'],
    'rate_limit': {
        'max_notifications_per_hour': 100,
        'cooldown_period': 300,     # å†·å´æœŸï¼ˆç§’ï¼‰
    }
}

# æ—¥å¿—é…ç½®
LOGGING_CONFIG = {
    'level': 'INFO',
    'format': '%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    'file': 'logs/mac_tracker.log',
    'max_size': '10MB',
    'backup_count': 5,
}

# APIé…ç½®
API_CONFIG = {
    'host': '0.0.0.0',
    'port': 8080,
    'debug': False,
    'cors_enabled': True,
    'rate_limit': '100/hour',
    'auth_required': False,
}

# æ•°æ®åº“é…ç½®
DATABASE_CONFIG = {
    'type': 'sqlite',               # sqlite/postgresql/mysql
    'url': 'sqlite:///data/tracker.db',
    'pool_size': 10,
    'max_overflow': 20,
}
```

</details>

### ğŸ” ç¯å¢ƒå˜é‡é…ç½®

<details>
<summary>ğŸ“ .envæ–‡ä»¶ç¤ºä¾‹</summary>

```bash
# .env
# åŸºç¡€é…ç½®
DEBUG=false
LOG_LEVEL=INFO
SECRET_KEY=your-secret-key-here

# æ•°æ®åº“é…ç½®
DATABASE_URL=sqlite:///data/tracker.db
REDIS_URL=redis://localhost:6379/0

# APIé…ç½®
API_HOST=0.0.0.0
API_PORT=8080
API_RATE_LIMIT=100/hour

# é€šçŸ¥é…ç½®
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/...
EMAIL_SMTP_SERVER=smtp.gmail.com
EMAIL_SMTP_PORT=587
EMAIL_USERNAME=your-email@gmail.com
EMAIL_PASSWORD=your-app-password

# ç¬¬ä¸‰æ–¹APIå¯†é’¥
GITHUB_TOKEN=ghp_xxxxxxxxxxxxxxxxxxxx
CHROME_API_KEY=your-chrome-api-key

# ç›‘æ§é…ç½®
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9091
GRAFANA_URL=http://grafana:3000
```

</details>

## âš¡ æ€§èƒ½ä¼˜åŒ–

### ğŸš€ å¹¶å‘æ§åˆ¶

<details>
<summary>âš™ï¸ æ™ºèƒ½å¹¶å‘ç®¡ç†</summary>

```python
# é…ç½®å¹¶å‘å‚æ•°
CONCURRENCY_CONFIG = {
    'max_workers': 10,              # æœ€å¤§å·¥ä½œçº¿ç¨‹æ•°
    'semaphore_limit': 5,          # ä¿¡å·é‡é™åˆ¶
    'rate_limit_per_domain': 2,    # æ¯ä¸ªåŸŸåçš„å¹¶å‘é™åˆ¶
    'adaptive_throttling': True,    # è‡ªé€‚åº”é™æµ
    'circuit_breaker': {
        'failure_threshold': 5,     # å¤±è´¥é˜ˆå€¼
        'recovery_timeout': 60,     # æ¢å¤è¶…æ—¶
    }
}
```

**æ€§èƒ½ç‰¹æ€§:**
- âœ… **å¼‚æ­¥å¹¶å‘æ£€æµ‹**: æ”¯æŒæ•°ç™¾ä¸ªè½¯ä»¶åŒæ—¶æ£€æµ‹
- âœ… **æ™ºèƒ½è´Ÿè½½å‡è¡¡**: é¿å…å¯¹ç›®æ ‡ç½‘ç«™é€ æˆå‹åŠ›
- âœ… **åˆ†å¸ƒå¼éƒ¨ç½²**: æ”¯æŒæ¨ªå‘æ‰©å±•æ£€æµ‹èƒ½åŠ›
- âœ… **ç†”æ–­æœºåˆ¶**: è‡ªåŠ¨å¤„ç†å¼‚å¸¸æƒ…å†µ

</details>

### ğŸ’¾ ç¼“å­˜ç­–ç•¥

<details>
<summary>ğŸ”„ å¤šçº§ç¼“å­˜æ¶æ„</summary>

```mermaid
graph TD
    A["è¯·æ±‚"] --> B["L1: å†…å­˜ç¼“å­˜"]
    B --> C{"ç¼“å­˜å‘½ä¸­?"}
    C -->|æ˜¯| D["è¿”å›ç»“æœ"]
    C -->|å¦| E["L2: Redisç¼“å­˜"]
    E --> F{"ç¼“å­˜å‘½ä¸­?"}
    F -->|æ˜¯| G["æ›´æ–°L1ç¼“å­˜"]
    F -->|å¦| H["L3: æ•°æ®åº“ç¼“å­˜"]
    H --> I{"ç¼“å­˜å‘½ä¸­?"}
    I -->|æ˜¯| J["æ›´æ–°L1+L2ç¼“å­˜"]
    I -->|å¦| K["æ‰§è¡Œæ£€æµ‹"]
    G --> D
    J --> D
    K --> L["æ›´æ–°æ‰€æœ‰ç¼“å­˜"]
    L --> D
```

**ç¼“å­˜ç‰¹æ€§:**
- ğŸ”¥ **L1å†…å­˜ç¼“å­˜**: æ¯«ç§’çº§å“åº”ï¼Œçƒ­ç‚¹æ•°æ®
- ğŸš€ **L2 Redisç¼“å­˜**: åˆ†å¸ƒå¼ç¼“å­˜ï¼Œè·¨å®ä¾‹å…±äº«
- ğŸ’¾ **L3æ•°æ®åº“ç¼“å­˜**: æŒä¹…åŒ–å­˜å‚¨ï¼Œå†å²æ•°æ®
- ğŸ§  **æ™ºèƒ½å¤±æ•ˆ**: æ ¹æ®è½¯ä»¶æ›´æ–°é¢‘ç‡åŠ¨æ€è°ƒæ•´TTL

</details>

### ğŸ”§ èµ„æºä¼˜åŒ–

<details>
<summary>âš¡ ç½‘ç»œä¸èµ„æºä¼˜åŒ–</summary>

| ä¼˜åŒ–é¡¹ç›® | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡å¹…åº¦ |
|----------|--------|--------|----------|
| é¡µé¢åŠ è½½æ—¶é—´ | 5-10ç§’ | 1-3ç§’ | **70%** |
| å†…å­˜ä½¿ç”¨ | 500MB | 150MB | **70%** |
| ç½‘ç»œæµé‡ | 100MB/æ£€æµ‹ | 20MB/æ£€æµ‹ | **80%** |
| å¹¶å‘èƒ½åŠ› | 5ä¸ª/ç§’ | 50ä¸ª/ç§’ | **900%** |

**ä¼˜åŒ–æŠ€æœ¯:**
- ğŸš« **å›¾ç‰‡ç¦ç”¨**: çˆ¬å–æ—¶ç¦ç”¨å›¾ç‰‡åŠ è½½
- ğŸ“¦ **å‹ç¼©ä¼ è¾“**: å¯ç”¨gzipå‹ç¼©
- ğŸ”— **è¿æ¥å¤ç”¨**: HTTPè¿æ¥æ± 
- ğŸ¯ **é€‰æ‹©æ€§åŠ è½½**: åªåŠ è½½å¿…è¦çš„é¡µé¢å…ƒç´ 

</details>

### ğŸ“Š æ€§èƒ½ç›‘æ§

<details>
<summary>ğŸ“ˆ å®æ—¶æ€§èƒ½æŒ‡æ ‡</summary>

```python
# æ€§èƒ½ç›‘æ§é…ç½®
MONITORING_METRICS = {
    'response_time_percentiles': [50, 90, 95, 99],
    'throughput_tracking': True,
    'error_rate_monitoring': True,
    'resource_usage_tracking': True,
    'cache_hit_rate_monitoring': True,
}
```

**ç›‘æ§é¢æ¿:**
- ğŸ“Š **æ£€æµ‹ååé‡**: å®æ—¶TPSç›‘æ§
- â±ï¸ **å“åº”æ—¶é—´**: P50/P90/P95/P99å»¶è¿Ÿ
- ğŸ’¾ **ç¼“å­˜å‘½ä¸­ç‡**: å„çº§ç¼“å­˜æ•ˆç‡
- ğŸ”¥ **èµ„æºä½¿ç”¨**: CPU/å†…å­˜/ç½‘ç»œç›‘æ§

</details>

## ğŸ“Š ç›‘æ§ä¸è¿ç»´

### ğŸ¥ å¥åº·æ£€æŸ¥

<details>
<summary>ğŸ” ç³»ç»Ÿå¥åº·ç›‘æ§</summary>

```bash
# åŸºç¡€å¥åº·æ£€æŸ¥
curl http://localhost:8080/health
# å“åº”: {"status": "healthy", "timestamp": "2023-12-12T10:30:00Z"}

# è¯¦ç»†çŠ¶æ€æ£€æŸ¥
curl http://localhost:8080/status
# å“åº”: è¯¦ç»†çš„ç³»ç»ŸçŠ¶æ€ä¿¡æ¯

# æ£€æµ‹å™¨çŠ¶æ€
curl http://localhost:8080/api/v1/detector/status
# å“åº”: å„ä¸ªæ£€æµ‹ç­–ç•¥çš„çŠ¶æ€

# ä¾èµ–æœåŠ¡æ£€æŸ¥
curl http://localhost:8080/api/v1/dependencies
# å“åº”: Redisã€æ•°æ®åº“ç­‰ä¾èµ–æœåŠ¡çŠ¶æ€
```

**å¥åº·æ£€æŸ¥æŒ‡æ ‡:**
- âœ… **ç³»ç»ŸçŠ¶æ€**: CPUã€å†…å­˜ã€ç£ç›˜ä½¿ç”¨ç‡
- âœ… **æœåŠ¡çŠ¶æ€**: APIæœåŠ¡ã€æ£€æµ‹å™¨ã€ç¼“å­˜æœåŠ¡
- âœ… **ä¾èµ–çŠ¶æ€**: æ•°æ®åº“ã€Redisã€å¤–éƒ¨API
- âœ… **ç½‘ç»œçŠ¶æ€**: ç½‘ç»œè¿é€šæ€§ã€DNSè§£æ

</details>

### ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

<details>
<summary>ğŸ“Š å…³é”®æ€§èƒ½æŒ‡æ ‡(KPI)</summary>

| æŒ‡æ ‡ç±»åˆ« | æŒ‡æ ‡åç§° | ç›®æ ‡å€¼ | ç›‘æ§æ–¹å¼ |
|----------|----------|--------|----------|
| **å¯ç”¨æ€§** | ç³»ç»Ÿæ­£å¸¸è¿è¡Œæ—¶é—´ | >99.9% | Prometheus |
| **æ€§èƒ½** | å¹³å‡å“åº”æ—¶é—´ | <2ç§’ | APMç›‘æ§ |
| **å‡†ç¡®æ€§** | æ£€æµ‹æˆåŠŸç‡ | >95% | ä¸šåŠ¡ç›‘æ§ |
| **æ•ˆç‡** | ç¼“å­˜å‘½ä¸­ç‡ | >80% | Redisç›‘æ§ |
| **å¹¶å‘** | å¹¶å‘å¤„ç†èƒ½åŠ› | 50+/ç§’ | å‹åŠ›æµ‹è¯• |

**Grafanaä»ªè¡¨æ¿:**
```json
{
  "dashboard": {
    "title": "Macè½¯ä»¶è¿½è¸ªå™¨ç›‘æ§",
    "panels": [
      {
        "title": "æ£€æµ‹æˆåŠŸç‡",
        "type": "stat",
        "targets": [
          {
            "expr": "rate(software_detection_success_total[5m]) / rate(software_detection_total[5m]) * 100"
          }
        ]
      },
      {
        "title": "å“åº”æ—¶é—´åˆ†å¸ƒ",
        "type": "histogram",
        "targets": [
          {
            "expr": "histogram_quantile(0.95, software_detection_duration_seconds_bucket)"
          }
        ]
      }
    ]
  }
}
```

</details>

### ğŸ“ æ—¥å¿—ç®¡ç†

<details>
<summary>ğŸ—‚ï¸ ç»“æ„åŒ–æ—¥å¿—ç³»ç»Ÿ</summary>

**æ—¥å¿—æ ¼å¼:**
```json
{
  "timestamp": "2023-12-12T10:30:00.123Z",
  "level": "INFO",
  "logger": "core.detector",
  "message": "Software detection completed",
  "context": {
    "software_name": "Chrome",
    "version": "120.0.6099.109",
    "strategy": "chrome_official",
    "duration_ms": 1234,
    "success": true
  },
  "trace_id": "abc123def456",
  "span_id": "def456ghi789"
}
```

**æ—¥å¿—çº§åˆ«:**
- ğŸ”´ **ERROR**: ç³»ç»Ÿé”™è¯¯ã€æ£€æµ‹å¤±è´¥
- ğŸŸ¡ **WARN**: è­¦å‘Šä¿¡æ¯ã€é‡è¯•æ“ä½œ
- ğŸ”µ **INFO**: æ­£å¸¸æ“ä½œã€æ£€æµ‹ç»“æœ
- ğŸŸ¢ **DEBUG**: è°ƒè¯•ä¿¡æ¯ã€è¯¦ç»†æµç¨‹

**æ—¥å¿—é›†æˆ:**
- ğŸ“Š **ELK Stack**: Elasticsearch + Logstash + Kibana
- ğŸ” **Fluentd**: æ—¥å¿—æ”¶é›†å’Œè½¬å‘
- ğŸ“ˆ **Grafana Loki**: è½»é‡çº§æ—¥å¿—èšåˆ
- â˜ï¸ **äº‘æ—¥å¿—**: AWS CloudWatchã€é˜¿é‡Œäº‘SLS

</details>

### ğŸš¨ å‘Šè­¦ç³»ç»Ÿ

<details>
<summary>âš ï¸ æ™ºèƒ½å‘Šè­¦é…ç½®</summary>

```yaml
# å‘Šè­¦è§„åˆ™é…ç½®
alerts:
  - name: "æ£€æµ‹æˆåŠŸç‡è¿‡ä½"
    condition: "success_rate < 90%"
    duration: "5m"
    severity: "warning"
    channels: ["slack", "email"]
    
  - name: "ç³»ç»Ÿå“åº”æ—¶é—´è¿‡é•¿"
    condition: "avg_response_time > 5s"
    duration: "2m"
    severity: "critical"
    channels: ["slack", "pagerduty"]
    
  - name: "ç¼“å­˜å‘½ä¸­ç‡è¿‡ä½"
    condition: "cache_hit_rate < 70%"
    duration: "10m"
    severity: "info"
    channels: ["slack"]
```

**å‘Šè­¦æ¸ é“:**
- ğŸ’¬ **Slack**: å®æ—¶å›¢é˜Ÿé€šçŸ¥
- ğŸ“§ **Email**: è¯¦ç»†å‘Šè­¦æŠ¥å‘Š
- ğŸ“± **PagerDuty**: ç´§æ€¥äº‹ä»¶å“åº”
- ğŸ”” **é’‰é’‰/ä¼ä¸šå¾®ä¿¡**: ä¼ä¸šå†…éƒ¨é€šçŸ¥

</details>

## ğŸ”§ æ‰©å±•å¼€å‘

### ğŸ¯ è‡ªå®šä¹‰æ£€æµ‹ç­–ç•¥

<details>
<summary>ğŸ› ï¸ åˆ›å»ºè‡ªå®šä¹‰ç­–ç•¥</summary>

```python
from core.strategies.base_strategy import BaseStrategy
from typing import Optional, Dict, Any

class CustomStrategy(BaseStrategy):
    """è‡ªå®šä¹‰æ£€æµ‹ç­–ç•¥ç¤ºä¾‹"""
    
    def __init__(self):
        super().__init__()
        self.name = "custom_strategy"
        self.priority = 5
        
    def can_handle(self, software_info: Dict[str, Any]) -> bool:
        """åˆ¤æ–­æ˜¯å¦èƒ½å¤„ç†è¯¥è½¯ä»¶"""
        return "custom-domain.com" in software_info.get("url", "")
    
    def detect_version(self, software_info: Dict[str, Any]) -> Optional[str]:
        """æ£€æµ‹ç‰ˆæœ¬å·"""
        try:
            # å®ç°è‡ªå®šä¹‰æ£€æµ‹é€»è¾‘
            url = software_info["url"]
            response = self.session.get(url)
            
            # ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æˆ–BeautifulSoupè§£æç‰ˆæœ¬
            import re
            version_match = re.search(r'version["\s]*:?["\s]*([0-9.]+)', response.text)
            
            if version_match:
                return version_match.group(1)
                
        except Exception as e:
            self.logger.error(f"æ£€æµ‹å¤±è´¥: {e}")
            
        return None
    
    def extract_download_url(self, software_info: Dict[str, Any]) -> Optional[str]:
        """æå–ä¸‹è½½é“¾æ¥"""
        try:
            # å®ç°ä¸‹è½½é“¾æ¥æå–é€»è¾‘
            url = software_info["url"]
            response = self.session.get(url)
            
            from bs4 import BeautifulSoup
            soup = BeautifulSoup(response.text, 'html.parser')
            
            # æŸ¥æ‰¾Macç‰ˆæœ¬çš„ä¸‹è½½é“¾æ¥
            download_link = soup.find('a', href=re.compile(r'.*\.dmg

## ğŸš€ éƒ¨ç½²æŒ‡å—

### ğŸ³ Dockeréƒ¨ç½²

<details>
<summary>ğŸ“¦ å®¹å™¨åŒ–éƒ¨ç½²</summary>

**Dockerfile:**
```dockerfile
FROM python:3.9-slim

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /app

# å®‰è£…ç³»ç»Ÿä¾èµ–
RUN apt-get update && apt-get install -y \
    wget \
    gnupg \
    unzip \
    curl \
    && rm -rf /var/lib/apt/lists/*

# å®‰è£…Chromeå’ŒChromeDriver
RUN wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add - \
    && echo "deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main" >> /etc/apt/sources.list.d/google.list \
    && apt-get update \
    && apt-get install -y google-chrome-stable \
    && rm -rf /var/lib/apt/lists/*

# å¤åˆ¶ä¾èµ–æ–‡ä»¶
COPY requirements.txt .

# å®‰è£…Pythonä¾èµ–
RUN pip install --no-cache-dir -r requirements.txt

# å¤åˆ¶åº”ç”¨ä»£ç 
COPY . .

# åˆ›å»ºæ•°æ®ç›®å½•
RUN mkdir -p /app/data /app/logs

# è®¾ç½®ç¯å¢ƒå˜é‡
ENV PYTHONPATH=/app
ENV CHROME_BIN=/usr/bin/google-chrome
ENV DISPLAY=:99

# æš´éœ²ç«¯å£
EXPOSE 8080

# å¥åº·æ£€æŸ¥
HEALTHCHECK --interval=30s --timeout=10s --start-period=5s --retries=3 \
    CMD curl -f http://localhost:8080/health || exit 1

# å¯åŠ¨å‘½ä»¤
CMD ["python", "main.py", "start-api", "--host", "0.0.0.0", "--port", "8080"]
```

**docker-compose.yml:**
```yaml
version: '3.8'

services:
  mac-tracker:
    build: .
    ports:
      - "8080:8080"
    environment:
      - DEBUG=false
      - LOG_LEVEL=INFO
      - REDIS_URL=redis://redis:6379/0
      - DATABASE_URL=postgresql://user:password@postgres:5432/tracker
    volumes:
      - ./data:/app/data
      - ./logs:/app/logs
      - ./config:/app/config
    depends_on:
      - redis
      - postgres
    restart: unless-stopped
    
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    restart: unless-stopped
    
  postgres:
    image: postgres:15-alpine
    environment:
      - POSTGRES_DB=tracker
      - POSTGRES_USER=user
      - POSTGRES_PASSWORD=password
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"
    restart: unless-stopped
    
  prometheus:
    image: prom/prometheus:latest
    ports:
      - "9090:9090"
    volumes:
      - ./monitoring/prometheus.yml:/etc/prometheus/prometheus.yml
      - prometheus_data:/prometheus
    restart: unless-stopped
    
  grafana:
    image: grafana/grafana:latest
    ports:
      - "3000:3000"
    environment:
      - GF_SECURITY_ADMIN_PASSWORD=admin
    volumes:
      - grafana_data:/var/lib/grafana
      - ./monitoring/grafana:/etc/grafana/provisioning
    restart: unless-stopped

volumes:
  redis_data:
  postgres_data:
  prometheus_data:
  grafana_data:
```

</details>

### â˜¸ï¸ Kuberneteséƒ¨ç½²

<details>
<summary>ğŸ›ï¸ K8sé›†ç¾¤éƒ¨ç½²</summary>

**deployment.yaml:**
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: mac-software-tracker
  labels:
    app: mac-software-tracker
spec:
  replicas: 3
  selector:
    matchLabels:
      app: mac-software-tracker
  template:
    metadata:
      labels:
        app: mac-software-tracker
    spec:
      containers:
      - name: tracker
        image: rickepicepic/mac-software-tracker:latest
        ports:
        - containerPort: 8080
        env:
        - name: DEBUG
          value: "false"
        - name: LOG_LEVEL
          value: "INFO"
        - name: REDIS_URL
          valueFrom:
            secretKeyRef:
              name: tracker-secrets
              key: redis-url
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              name: tracker-secrets
              key: database-url
        resources:
          requests:
            memory: "256Mi"
            cpu: "250m"
          limits:
            memory: "512Mi"
            cpu: "500m"
        livenessProbe:
          httpGet:
            path: /health
            port: 8080
          initialDelaySeconds: 30
          periodSeconds: 10
        readinessProbe:
          httpGet:
            path: /ready
            port: 8080
          initialDelaySeconds: 5
          periodSeconds: 5
        volumeMounts:
        - name: config-volume
          mountPath: /app/config
        - name: data-volume
          mountPath: /app/data
      volumes:
      - name: config-volume
        configMap:
          name: tracker-config
      - name: data-volume
        persistentVolumeClaim:
          claimName: tracker-data-pvc
---
apiVersion: v1
kind: Service
metadata:
  name: mac-software-tracker-service
spec:
  selector:
    app: mac-software-tracker
  ports:
  - protocol: TCP
    port: 80
    targetPort: 8080
  type: LoadBalancer
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: mac-software-tracker-ingress
  annotations:
    kubernetes.io/ingress.class: nginx
    cert-manager.io/cluster-issuer: letsencrypt-prod
spec:
  tls:
  - hosts:
    - tracker.yourdomain.com
    secretName: tracker-tls
  rules:
  - host: tracker.yourdomain.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: mac-software-tracker-service
            port:
              number: 80
```

**Helm Chartéƒ¨ç½²:**
```bash
# æ·»åŠ Helmä»“åº“
helm repo add mac-tracker https://charts.yourdomain.com/mac-tracker

# å®‰è£…
helm install mac-tracker mac-tracker/mac-software-tracker \
  --set image.tag=latest \
  --set ingress.enabled=true \
  --set ingress.hosts[0].host=tracker.yourdomain.com \
  --set postgresql.enabled=true \
  --set redis.enabled=true
```

</details>

### â˜ï¸ äº‘æœåŠ¡éƒ¨ç½²

<details>
<summary>ğŸŒ©ï¸ å¤šäº‘å¹³å°æ”¯æŒ</summary>

**AWSéƒ¨ç½² (Terraform):**
```hcl
# main.tf
provider "aws" {
  region = var.aws_region
}

# ECS Cluster
resource "aws_ecs_cluster" "mac_tracker" {
  name = "mac-software-tracker"
  
  setting {
    name  = "containerInsights"
    value = "enabled"
  }
}

# ECS Service
resource "aws_ecs_service" "mac_tracker" {
  name            = "mac-tracker-service"
  cluster         = aws_ecs_cluster.mac_tracker.id
  task_definition = aws_ecs_task_definition.mac_tracker.arn
  desired_count   = 3
  
  load_balancer {
    target_group_arn = aws_lb_target_group.mac_tracker.arn
    container_name   = "mac-tracker"
    container_port   = 8080
  }
}

# Lambdaéƒ¨ç½²ï¼ˆServerlessï¼‰
resource "aws_lambda_function" "mac_tracker" {
  filename         = "mac_tracker.zip"
  function_name    = "mac-software-tracker"
  role            = aws_iam_role.lambda_role.arn
  handler         = "lambda_handler.handler"
  runtime         = "python3.9"
  timeout         = 300
  memory_size     = 1024
  
  environment {
    variables = {
      REDIS_URL = aws_elasticache_cluster.redis.cache_nodes[0].address
    }
  }
}
```

**é˜¿é‡Œäº‘éƒ¨ç½²:**
```yaml
# å®¹å™¨æœåŠ¡ACKéƒ¨ç½²
apiVersion: v1
kind: ConfigMap
metadata:
  name: tracker-config
data:
  settings.py: |
    DEBUG = False
    LOG_LEVEL = "INFO"
    REDIS_URL = "redis://redis-service:6379/0"
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: mac-tracker-deployment
spec:
  replicas: 3
  selector:
    matchLabels:
      app: mac-tracker
  template:
    metadata:
      labels:
        app: mac-tracker
    spec:
      containers:
      - name: mac-tracker
        image: registry.cn-hangzhou.aliyuncs.com/your-namespace/mac-tracker:latest
        ports:
        - containerPort: 8080
```

**è…¾è®¯äº‘éƒ¨ç½²:**
```bash
# ä½¿ç”¨è…¾è®¯äº‘CLIéƒ¨ç½²
tccli cvm RunInstances \
  --ImageId img-xxx \
  --InstanceType S5.MEDIUM2 \
  --Placement.Zone ap-guangzhou-3 \
  --InstanceName mac-tracker \
  --UserData "$(base64 -w 0 user-data.sh)"
```

</details>

### ğŸ”§ ä¸€é”®éƒ¨ç½²è„šæœ¬

<details>
<summary>âš¡ å¿«é€Ÿéƒ¨ç½²</summary>

```bash
#!/bin/bash
# deploy.sh - ä¸€é”®éƒ¨ç½²è„šæœ¬

set -e

echo "ğŸš€ å¼€å§‹éƒ¨ç½²Macè½¯ä»¶ç‰ˆæœ¬è¿½è¸ªå™¨..."

# æ£€æŸ¥ä¾èµ–
check_dependencies() {
    echo "ğŸ“‹ æ£€æŸ¥ç³»ç»Ÿä¾èµ–..."
    
    if ! command -v docker &> /dev/null; then
        echo "âŒ Dockeræœªå®‰è£…ï¼Œè¯·å…ˆå®‰è£…Docker"
        exit 1
    fi
    
    if ! command -v docker-compose &> /dev/null; then
        echo "âŒ Docker Composeæœªå®‰è£…ï¼Œè¯·å…ˆå®‰è£…Docker Compose"
        exit 1
    fi
    
    echo "âœ… ä¾èµ–æ£€æŸ¥å®Œæˆ"
}

# åˆ›å»ºç›®å½•ç»“æ„
setup_directories() {
    echo "ğŸ“ åˆ›å»ºç›®å½•ç»“æ„..."
    mkdir -p {data,logs,config,monitoring}
    echo "âœ… ç›®å½•åˆ›å»ºå®Œæˆ"
}

# ç”Ÿæˆé…ç½®æ–‡ä»¶
generate_config() {
    echo "âš™ï¸ ç”Ÿæˆé…ç½®æ–‡ä»¶..."
    
    cat > .env << EOF
DEBUG=false
LOG_LEVEL=INFO
SECRET_KEY=$(openssl rand -hex 32)
REDIS_URL=redis://redis:6379/0
DATABASE_URL=postgresql://tracker:$(openssl rand -hex 16)@postgres:5432/tracker
EOF
    
    echo "âœ… é…ç½®æ–‡ä»¶ç”Ÿæˆå®Œæˆ"
}

# å¯åŠ¨æœåŠ¡
start_services() {
    echo "ğŸ³ å¯åŠ¨DockeræœåŠ¡..."
    docker-compose up -d
    
    echo "â³ ç­‰å¾…æœåŠ¡å¯åŠ¨..."
    sleep 30
    
    # å¥åº·æ£€æŸ¥
    if curl -f http://localhost:8080/health > /dev/null 2>&1; then
        echo "âœ… æœåŠ¡å¯åŠ¨æˆåŠŸï¼"
        echo "ğŸŒ è®¿é—®åœ°å€: http://localhost:8080"
        echo "ğŸ“Š ç›‘æ§é¢æ¿: http://localhost:3000 (admin/admin)"
    else
        echo "âŒ æœåŠ¡å¯åŠ¨å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ—¥å¿—"
        docker-compose logs
        exit 1
    fi
}

# ä¸»å‡½æ•°
main() {
    check_dependencies
    setup_directories
    generate_config
    start_services
    
    echo "ğŸ‰ éƒ¨ç½²å®Œæˆï¼"
}

main "$@"
```

</details>

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼æ— è®ºæ˜¯æŠ¥å‘Šbugã€æå‡ºæ–°åŠŸèƒ½å»ºè®®ï¼Œè¿˜æ˜¯æäº¤ä»£ç æ”¹è¿›ã€‚

### ğŸ“‹ è´¡çŒ®æµç¨‹

<details>
<summary>ğŸ”„ æ ‡å‡†è´¡çŒ®æµç¨‹</summary>

1. **ğŸ´ Forké¡¹ç›®**
   ```bash
   # Forké¡¹ç›®åˆ°ä½ çš„GitHubè´¦æˆ·
   # ç„¶åå…‹éš†åˆ°æœ¬åœ°
   git clone https://github.com/your-username/MacSoftwareVersionTracker.git
   cd MacSoftwareVersionTracker
   ```

2. **ğŸŒ¿ åˆ›å»ºç‰¹æ€§åˆ†æ”¯**
   ```bash
   git checkout -b feature/amazing-feature
   # æˆ–è€…ä¿®å¤bug
   git checkout -b fix/bug-description
   ```

3. **ğŸ’» å¼€å‘å’Œæµ‹è¯•**
   ```bash
   # å®‰è£…å¼€å‘ä¾èµ–
   pip install -r requirements-dev.txt
   
   # è¿è¡Œæµ‹è¯•
   python -m pytest tests/
   
   # ä»£ç æ ¼å¼åŒ–
   black .
   isort .
   
   # ä»£ç æ£€æŸ¥
   flake8 .
   mypy .
   ```

4. **ğŸ“ æäº¤æ›´æ”¹**
   ```bash
   git add .
   git commit -m "feat: add amazing feature"
   # æäº¤ä¿¡æ¯æ ¼å¼: type(scope): description
   # type: feat, fix, docs, style, refactor, test, chore
   ```

5. **ğŸš€ æ¨é€å’ŒPR**
   ```bash
   git push origin feature/amazing-feature
   # ç„¶ååœ¨GitHubä¸Šåˆ›å»ºPull Request
   ```

</details>

### ğŸ› æŠ¥å‘Šé—®é¢˜

<details>
<summary>ğŸ“ é—®é¢˜æŠ¥å‘Šæ¨¡æ¿</summary>

åœ¨æäº¤issueæ—¶ï¼Œè¯·åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š

```markdown
## ğŸ› Bugæè¿°
ç®€è¦æè¿°é‡åˆ°çš„é—®é¢˜

## ğŸ”„ å¤ç°æ­¥éª¤
1. æ‰§è¡Œå‘½ä»¤ '...'
2. ç‚¹å‡» '....'
3. æ»šåŠ¨åˆ° '....'
4. çœ‹åˆ°é”™è¯¯

## ğŸ¯ æœŸæœ›è¡Œä¸º
æè¿°ä½ æœŸæœ›å‘ç”Ÿçš„æƒ…å†µ

## ğŸ“± ç¯å¢ƒä¿¡æ¯
- OS: [e.g. macOS 13.0]
- Pythonç‰ˆæœ¬: [e.g. 3.9.0]
- é¡¹ç›®ç‰ˆæœ¬: [e.g. 1.2.0]

## ğŸ“‹ é¢å¤–ä¿¡æ¯
æ·»åŠ ä»»ä½•å…¶ä»–ç›¸å…³ä¿¡æ¯ã€æˆªå›¾ç­‰
```

</details>

### ğŸ’¡ åŠŸèƒ½å»ºè®®

<details>
<summary>ğŸš€ åŠŸèƒ½è¯·æ±‚æ¨¡æ¿</summary>

```markdown
## ğŸš€ åŠŸèƒ½æè¿°
ç®€è¦æè¿°ä½ å¸Œæœ›æ·»åŠ çš„åŠŸèƒ½

## ğŸ¯ è§£å†³çš„é—®é¢˜
è¿™ä¸ªåŠŸèƒ½è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ

## ğŸ’­ å»ºè®®çš„è§£å†³æ–¹æ¡ˆ
æè¿°ä½ å¸Œæœ›å¦‚ä½•å®ç°è¿™ä¸ªåŠŸèƒ½

## ğŸ”„ æ›¿ä»£æ–¹æ¡ˆ
æè¿°ä½ è€ƒè™‘è¿‡çš„å…¶ä»–æ›¿ä»£æ–¹æ¡ˆ

## ğŸ“‹ é¢å¤–ä¿¡æ¯
æ·»åŠ ä»»ä½•å…¶ä»–ç›¸å…³ä¿¡æ¯
```

</details>

### ğŸ“š å¼€å‘æŒ‡å—

<details>
<summary>ğŸ› ï¸ å¼€å‘ç¯å¢ƒè®¾ç½®</summary>

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/rickepicepic/MacSoftwareVersionTracker.git
cd MacSoftwareVersionTracker

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate

# 3. å®‰è£…å¼€å‘ä¾èµ–
pip install -r requirements-dev.txt

# 4. å®‰è£…pre-commité’©å­
pre-commit install

# 5. è¿è¡Œæµ‹è¯•ç¡®ä¿ç¯å¢ƒæ­£å¸¸
python -m pytest tests/ -v
```

**ä»£ç è§„èŒƒ:**
- ä½¿ç”¨Blackè¿›è¡Œä»£ç æ ¼å¼åŒ–
- ä½¿ç”¨isortè¿›è¡Œå¯¼å…¥æ’åº
- ä½¿ç”¨flake8è¿›è¡Œä»£ç æ£€æŸ¥
- ä½¿ç”¨mypyè¿›è¡Œç±»å‹æ£€æŸ¥
- æµ‹è¯•è¦†ç›–ç‡è¦æ±‚ > 80%

</details>

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ **MIT License** å¼€æºåè®®ã€‚

<details>
<summary>ğŸ“œ è®¸å¯è¯è¯¦æƒ…</summary>

```
MIT License

Copyright (c) 2023 Mac Software Version Tracker

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

</details>

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### ğŸ†˜ è·å–å¸®åŠ©

| æ¸ é“ | æè¿° | å“åº”æ—¶é—´ |
|------|------|----------|
| ğŸ“§ **é‚®ç®±** | support@mactracker.dev | 24å°æ—¶å†… |
| ğŸ’¬ **Slack** | [#mac-software-tracker](https://join.slack.com/t/mactracker/shared_invite/xxx) | å®æ—¶ |
| ğŸ› **GitHub Issues** | [æäº¤é—®é¢˜](https://github.com/rickepicepic/MacSoftwareVersionTracker/issues) | 48å°æ—¶å†… |
| ğŸ“– **æ–‡æ¡£** | [åœ¨çº¿æ–‡æ¡£](https://docs.mactracker.dev) | - |
| ğŸ’¡ **è®¨è®º** | [GitHub Discussions](https://github.com/rickepicepic/MacSoftwareVersionTracker/discussions) | ç¤¾åŒºé©±åŠ¨ |

### ğŸŒŸ ç¤¾åŒº

- **â­ Staré¡¹ç›®**: å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ªStarï¼
- **ğŸ”„ åˆ†äº«**: å°†é¡¹ç›®åˆ†äº«ç»™æ›´å¤šéœ€è¦çš„äºº
- **ğŸ’¬ åé¦ˆ**: å‘Šè¯‰æˆ‘ä»¬ä½ çš„ä½¿ç”¨ä½“éªŒå’Œæ”¹è¿›å»ºè®®
- **ğŸ¤ è´¡çŒ®**: å‚ä¸é¡¹ç›®å¼€å‘ï¼Œè®©å®ƒå˜å¾—æ›´å¥½

### ğŸ“Š é¡¹ç›®ç»Ÿè®¡

<div align="center">

![GitHub stars](https://img.shields.io/github/stars/rickepicepic/MacSoftwareVersionTracker.svg?style=social)
![GitHub forks](https://img.shields.io/github/forks/rickepicepic/MacSoftwareVersionTracker.svg?style=social)
![GitHub watchers](https://img.shields.io/github/watchers/rickepicepic/MacSoftwareVersionTracker.svg?style=social)

![GitHub issues](https://img.shields.io/github/issues/rickepicepic/MacSoftwareVersionTracker.svg)
![GitHub pull requests](https://img.shields.io/github/issues-pr/rickepicepic/MacSoftwareVersionTracker.svg)
![GitHub contributors](https://img.shields.io/github/contributors/rickepicepic/MacSoftwareVersionTracker.svg)

</div>

---

<div align="center">

**ğŸ‰ æ„Ÿè°¢ä½¿ç”¨Macè½¯ä»¶ç‰ˆæœ¬è‡ªåŠ¨è¿½è¸ªå™¨ï¼**

*è®©è½¯ä»¶ç‰ˆæœ¬ç®¡ç†å˜å¾—ç®€å•é«˜æ•ˆ* âœ¨

[â¬†ï¸ å›åˆ°é¡¶éƒ¨](#-macè½¯ä»¶ç‰ˆæœ¬è‡ªåŠ¨è¿½è¸ªå™¨)

</div>))
            
            if download_link:
                return download_link['href']
                
        except Exception as e:
            self.logger.error(f"æå–ä¸‹è½½é“¾æ¥å¤±è´¥: {e}")
            
        return None

# æ³¨å†Œè‡ªå®šä¹‰ç­–ç•¥
from core.strategy_manager import StrategyManager

strategy_manager = StrategyManager()
strategy_manager.register_strategy(CustomStrategy())
```

</details>

### ğŸ§© æ’ä»¶ç³»ç»Ÿ

<details>
<summary>ğŸ”Œ å¼€å‘æ’ä»¶</summary>

```python
from core.plugins.base_plugin import BasePlugin
from typing import Dict, Any

class VersionComparePlugin(BasePlugin):
    """ç‰ˆæœ¬æ¯”è¾ƒæ’ä»¶"""
    
    def __init__(self):
        super().__init__()
        self.name = "version_compare"
        self.version = "1.0.0"
        
    def on_version_detected(self, result: Dict[str, Any]) -> None:
        """ç‰ˆæœ¬æ£€æµ‹å®Œæˆåçš„å›è°ƒ"""
        software_name = result.get("name")
        new_version = result.get("version")
        
        # è·å–å†å²ç‰ˆæœ¬
        old_version = self.get_last_version(software_name)
        
        if old_version and self.is_newer_version(new_version, old_version):
            # å‘é€æ›´æ–°é€šçŸ¥
            self.send_update_notification(software_name, old_version, new_version)
            
        # ä¿å­˜æ–°ç‰ˆæœ¬
        self.save_version(software_name, new_version)
    
    def on_detection_failed(self, error: Dict[str, Any]) -> None:
        """æ£€æµ‹å¤±è´¥æ—¶çš„å›è°ƒ"""
        software_name = error.get("software_name")
        error_message = error.get("message")
        
        # è®°å½•å¤±è´¥æ—¥å¿—
        self.logger.error(f"æ£€æµ‹å¤±è´¥ - {software_name}: {error_message}")
        
        # å‘é€å¤±è´¥é€šçŸ¥ï¼ˆå¦‚æœè¿ç»­å¤±è´¥æ¬¡æ•°è¶…è¿‡é˜ˆå€¼ï¼‰
        failure_count = self.get_failure_count(software_name)
        if failure_count >= 3:
            self.send_failure_notification(software_name, error_message)
    
    def is_newer_version(self, new_version: str, old_version: str) -> bool:
        """æ¯”è¾ƒç‰ˆæœ¬å·"""
        from packaging import version
        try:
            return version.parse(new_version) > version.parse(old_version)
        except:
            return new_version != old_version

# åŠ è½½æ’ä»¶
from core.detector import SoftwareVersionDetector

detector = SoftwareVersionDetector()
detector.load_plugin(VersionComparePlugin())
```

</details>

### ğŸ”— é€‚é…å™¨å¼€å‘

<details>
<summary>ğŸŒ è‡ªå®šä¹‰é€‚é…å™¨</summary>

```python
from adapters.base_adapter import BaseAdapter
from typing import Optional, Dict, Any

class GraphQLAdapter(BaseAdapter):
    """GraphQL APIé€‚é…å™¨"""
    
    def __init__(self):
        super().__init__()
        self.name = "graphql"
        
    def fetch_data(self, url: str, query: str, variables: Dict = None) -> Optional[Dict]:
        """æ‰§è¡ŒGraphQLæŸ¥è¯¢"""
        try:
            payload = {
                "query": query,
                "variables": variables or {}
            }
            
            response = self.session.post(
                url,
                json=payload,
                headers={"Content-Type": "application/json"}
            )
            
            response.raise_for_status()
            return response.json()
            
        except Exception as e:
            self.logger.error(f"GraphQLæŸ¥è¯¢å¤±è´¥: {e}")
            return None

class WebSocketAdapter(BaseAdapter):
    """WebSocketé€‚é…å™¨"""
    
    def __init__(self):
        super().__init__()
        self.name = "websocket"
        
    async def connect_and_listen(self, url: str, message_handler) -> None:
        """è¿æ¥WebSocketå¹¶ç›‘å¬æ¶ˆæ¯"""
        import websockets
        
        try:
            async with websockets.connect(url) as websocket:
                async for message in websocket:
                    await message_handler(message)
                    
        except Exception as e:
            self.logger.error(f"WebSocketè¿æ¥å¤±è´¥: {e}")
```

</details>

### ğŸ“¦ ä¸­é—´ä»¶å¼€å‘

<details>
<summary>âš™ï¸ è‡ªå®šä¹‰ä¸­é—´ä»¶</summary>

```python
from core.middleware.base_middleware import BaseMiddleware
from typing import Dict, Any, Callable

class RateLimitMiddleware(BaseMiddleware):
    """è¯·æ±‚é™æµä¸­é—´ä»¶"""
    
    def __init__(self, max_requests: int = 100, time_window: int = 3600):
        super().__init__()
        self.max_requests = max_requests
        self.time_window = time_window
        self.request_counts = {}
        
    def before_request(self, context: Dict[str, Any]) -> bool:
        """è¯·æ±‚å‰å¤„ç†"""
        domain = self.extract_domain(context.get("url", ""))
        current_time = time.time()
        
        # æ¸…ç†è¿‡æœŸè®°å½•
        self.cleanup_expired_records(current_time)
        
        # æ£€æŸ¥è¯·æ±‚é¢‘ç‡
        if self.is_rate_limited(domain, current_time):
            self.logger.warning(f"è¯·æ±‚é¢‘ç‡é™åˆ¶: {domain}")
            return False
            
        # è®°å½•è¯·æ±‚
        self.record_request(domain, current_time)
        return True
        
    def after_request(self, context: Dict[str, Any], result: Any) -> Any:
        """è¯·æ±‚åå¤„ç†"""
        # å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ å“åº”å¤„ç†é€»è¾‘
        return result

class CacheMiddleware(BaseMiddleware):
    """ç¼“å­˜ä¸­é—´ä»¶"""
    
    def __init__(self, cache_service):
        super().__init__()
        self.cache = cache_service
        
    def before_request(self, context: Dict[str, Any]) -> Any:
        """æ£€æŸ¥ç¼“å­˜"""
        cache_key = self.generate_cache_key(context)
        cached_result = self.cache.get(cache_key)
        
        if cached_result:
            self.logger.info(f"ç¼“å­˜å‘½ä¸­: {cache_key}")
            return cached_result
            
        return None
        
    def after_request(self, context: Dict[str, Any], result: Any) -> Any:
        """ä¿å­˜åˆ°ç¼“å­˜"""
        if result and result.get("success"):
            cache_key = self.generate_cache_key(context)
            self.cache.set(cache_key, result, ttl=3600)
            
        return result
```

</details>

## éƒ¨ç½²æ–¹æ¡ˆ

### 1. Dockeréƒ¨ç½²
```dockerfile
FROM python:3.9-slim
COPY . /app
WORKDIR /app
RUN pip install -r requirements.txt
CMD ["python", "main.py"]
```

### 2. Kuberneteséƒ¨ç½²
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: mac-software-tracker
spec:
  replicas: 3
  selector:
    matchLabels:
      app: mac-software-tracker
  template:
    metadata:
      labels:
        app: mac-software-tracker
    spec:
      containers:
      - name: tracker
        image: mac-software-tracker:latest
        ports:
        - containerPort: 8080
```

### 3. äº‘æœåŠ¡éƒ¨ç½²
- æ”¯æŒAWS Lambdaã€Azure Functionsç­‰Serverlesséƒ¨ç½²
- æ”¯æŒé˜¿é‡Œäº‘ã€è…¾è®¯äº‘ç­‰å›½å†…äº‘æœåŠ¡
- æä¾›Terraformè„šæœ¬ï¼Œä¸€é”®éƒ¨ç½²åŸºç¡€è®¾æ–½

## è®¸å¯è¯

MIT License - è¯¦è§ LICENSE æ–‡ä»¶

## è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## æŠ€æœ¯æ”¯æŒ

- ğŸ“§ é‚®ç®±: support@example.com
- ğŸ’¬ Slack: #mac-software-tracker
- ğŸ“– æ–‡æ¡£: https://docs.example.com
- ğŸ› é—®é¢˜åé¦ˆ: https://github.com/example/issues
